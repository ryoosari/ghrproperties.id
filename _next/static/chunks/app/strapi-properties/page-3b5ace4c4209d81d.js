(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{4654:function(){},3250:function(e,t,r){Promise.resolve().then(r.bind(r,3593))},3593:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(7437),s=r(2265),n=r(3464),l=r(4927),o=r.n(l),i=r(257);let c=i.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337",d=i.env.NEXT_PUBLIC_STRAPI_API_TOKEN,u=n.Z.create({baseURL:"".concat(c,"/api"),headers:d?{Authorization:"Bearer ".concat(d)}:{}});async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t={populate:"*",sort:["createdAt:desc"],...e},r=o().stringify(t,{encodeValuesOnly:!0}),a=await u.get("/properties?".concat(r));return console.log("Raw Strapi response:",a.data),a.data}catch(e){return console.error("Error fetching properties from Strapi:",e),e.response&&(console.error("Error status:",e.response.status),console.error("Error data:",e.response.data),404===e.response.status&&console.log("No properties found (404 response), returning empty data array")),{data:[],meta:{pagination:{total:0}}}}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||0===e?"".concat(e," ").concat(t).trim():"N/A"}var h=r(7648);r(3145);var x=r(257);function f(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async function(){try{n(!0);let e=await m();console.log("Strapi properties response:",e),e&&e.data?t(e.data):Array.isArray(e)?t(e):t([]),n(!1)}catch(e){console.error("Error fetching properties:",e),o("Failed to load properties from Strapi"),n(!1)}})()},[]),r)?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Properties from Strapi"}),(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"animate-pulse",children:"Loading properties..."})})]}):l?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Properties from Strapi"}),(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,a.jsx)("p",{children:l}),(0,a.jsxs)("p",{className:"mt-2",children:["Make sure your Strapi server is running at ",x.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337"]})]})]}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Properties from Strapi"}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"No properties found in Strapi."}),(0,a.jsxs)("p",{className:"mt-2 text-gray-500",children:["Add some properties in the Strapi admin panel at"," ",(0,a.jsxs)("a",{href:"".concat(x.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337","/admin"),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:[x.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337","/admin"]})]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>(0,a.jsx)(g,{property:e},e.id))})]})}function g(e){let{property:t}=e;console.log("Property data:",t);let r=t.Title||"No Title";t.Description;let s=t.Price||0,n=t.Location||"No Location",l=t.Bedrooms||0,o=t.Bathrooms||0,i=t.Area||0,d=t.Status||"unlisted",u=t.Slug||t.id,m=t.Image||[];console.log("Image data:",m);let x=m.length>0?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return"";try{if(Array.isArray(e)&&e.length>0){let r=e[0];if(t&&r.formats&&r.formats[t]&&r.formats[t].url){let e=r.formats[t].url;return e.startsWith("/")?"".concat(c).concat(e):e}if(r.url)return r.url.startsWith("/")?"".concat(c).concat(r.url):r.url}if(e.data){if(Array.isArray(e.data)&&e.data.length>0){let{url:t}=e.data[0].attributes;return t.startsWith("/")?"".concat(c).concat(t):t}if(e.data.attributes&&e.data.attributes.url){let{url:t}=e.data.attributes;return t.startsWith("/")?"".concat(c).concat(t):t}}return""}catch(e){return console.error("Error getting media URL:",e),""}}(m,"medium"):"/placeholder-property.jpg";return console.log("Image URL:",x),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-[1.02]",children:[(0,a.jsxs)("div",{className:"relative h-64 w-full",children:[x?(0,a.jsx)("img",{src:x,alt:r,className:"h-full w-full object-cover"}):(0,a.jsx)("div",{className:"h-full w-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No image"})}),(0,a.jsx)("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full ".concat({for_sale:"bg-green-100 text-green-800",for_rent:"bg-blue-100 text-blue-800",sold:"bg-red-100 text-red-800",rented:"bg-purple-100 text-purple-800"}[d]||"bg-gray-100"),children:{for_sale:"For Sale",for_rent:"For Rent",sold:"Sold",rented:"Rented"}[d]||d||"Status N/A"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2 line-clamp-1",children:r}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:n}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("p",{className:"text-xl font-bold text-primary",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"IDR";if(!e&&0!==e)return"Price on request";try{let r=Number(e);return new Intl.NumberFormat("id-ID",{style:"currency",currency:t,maximumFractionDigits:0}).format(r)}catch(t){return console.error("Error formatting price:",t),String(e)}}(s)})}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDECFÔ∏è"}),(0,a.jsx)("span",{children:p(l,"Bed")})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDEBF"}),(0,a.jsx)("span",{children:p(o,"Bath")})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCF"}),(0,a.jsx)("span",{children:p(i,"m\xb2")})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(h.default,{href:"/property/".concat(u||t.id),className:"block w-full bg-primary text-white text-center py-2 rounded hover:bg-primary-dark transition",children:"View Details"})})]})]})}}},function(e){e.O(0,[726,140,971,117,744],function(){return e(e.s=3250)}),_N_E=e.O()}]);