(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{4654:function(){},3250:function(e,t,r){Promise.resolve().then(r.bind(r,3593))},3593:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),n=r(2265),o=r(3464),s=r(4927),l=r.n(s),c=r(257);window.convertImageUrl=window.convertImageUrl||function(e){return e};let i=c.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337",d=c.env.NEXT_PUBLIC_STRAPI_API_TOKEN,u=o.Z.create({baseURL:"".concat(i,"/api"),headers:d?{Authorization:"Bearer ".concat(d)}:{}});async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t={populate:"*",sort:["createdAt:desc"],...e},r=l().stringify(t,{encodeValuesOnly:!0}),a=await u.get("/properties?".concat(r));return console.log("Raw Strapi response:",a.data),a.data}catch(e){return console.error("Error fetching properties from Strapi:",e),e.response&&(console.error("Error status:",e.response.status),console.error("Error data:",e.response.data),404===e.response.status&&console.log("No properties found (404 response), returning empty data array")),{data:[],meta:{pagination:{total:0}}}}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||0===e?"".concat(e," ").concat(t).trim():"N/A"}var h=r(7648);r(3145);var f=r(257);function g(){let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)(!0),[s,l]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async function(){try{o(!0);let e=await m();console.log("Strapi properties response:",e),e&&e.data?t(e.data):Array.isArray(e)?t(e):t([]),o(!1)}catch(e){console.error("Error fetching properties:",e),l("Failed to load properties from Strapi"),o(!1)}})()},[]),r)?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Properties from Strapi"}),(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"animate-pulse",children:"Loading properties..."})})]}):s?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Properties from Strapi"}),(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,a.jsx)("p",{children:s}),(0,a.jsxs)("p",{className:"mt-2",children:["Make sure your Strapi server is running at ",f.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337"]})]})]}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Properties from Strapi"}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"No properties found in Strapi."}),(0,a.jsxs)("p",{className:"mt-2 text-gray-500",children:["Add some properties in the Strapi admin panel at"," ",(0,a.jsxs)("a",{href:"".concat(f.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337","/admin"),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:[f.env.NEXT_PUBLIC_STRAPI_URL||"http://localhost:1337","/admin"]})]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>(0,a.jsx)(x,{property:e},e.id))})]})}function x(e){let{property:t}=e;console.log("Property data:",t);let r=t.Title||"No Title";t.Description;let n=t.Price||0,o=t.Location||"No Location",s=t.Bedrooms||0,l=t.Bathrooms||0,c=t.Area||0,d=t.Status||"unlisted",u=t.Slug||t.id,m=t.Image||[];console.log("Image data:",m);let f=m.length>0?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return"/placeholder-property.jpg";try{if(Array.isArray(e)&&e.length>0){let r=e[0];if(!r||"object"!=typeof r)return"/placeholder-property.jpg";if(window.convertImageUrl&&r.url){let e=r.url.startsWith("/")?"".concat(i).concat(r.url):r.url,t=window.convertImageUrl(e);if(t!==e)return console.log("Converted image URL using client-side converter: ".concat(e," -> ").concat(t)),t}if(t&&r.formats&&r.formats[t]&&r.formats[t].url){if(window.convertImageUrl){let e=r.formats[t].url,a=e.startsWith("/")?"".concat(i).concat(e):e,n=window.convertImageUrl(a);if(n!==a)return console.log("Converted format URL: ".concat(a," -> ").concat(n)),n}let e=r.formats[t].url;return e.startsWith("/")?"".concat(i).concat(e):e}if(r.url)return r.url.startsWith("/")?"".concat(i).concat(r.url):r.url;return"/placeholder-property.jpg"}if(e&&"object"==typeof e){if(e.url){if(window.convertImageUrl){let t=e.url.startsWith("/")?"".concat(i).concat(e.url):e.url,r=window.convertImageUrl(t);if(r!==t)return console.log("Converted single URL: ".concat(t," -> ").concat(r)),r}return e.url.startsWith("/")?"".concat(i).concat(e.url):e.url}if(t&&e.formats&&e.formats[t]&&e.formats[t].url){if(window.convertImageUrl){let r=e.formats[t].url,a=r.startsWith("/")?"".concat(i).concat(r):r,n=window.convertImageUrl(a);if(n!==a)return console.log("Converted format URL for single media: ".concat(a," -> ").concat(n)),n}let r=e.formats[t].url;return r.startsWith("/")?"".concat(i).concat(r):r}}if(e.data){if(Array.isArray(e.data)&&e.data.length>0){let t=e.data[0];if(t&&t.attributes&&t.attributes.url){let{url:e}=t.attributes;if(window.convertImageUrl){let t=e.startsWith("/")?"".concat(i).concat(e):e,r=window.convertImageUrl(t);if(r!==t)return console.log("Converted legacy data URL: ".concat(t," -> ").concat(r)),r}return e.startsWith("/")?"".concat(i).concat(e):e}}if(e.data.attributes&&e.data.attributes.url){let{url:t}=e.data.attributes;if(window.convertImageUrl){let e=t.startsWith("/")?"".concat(i).concat(t):t,r=window.convertImageUrl(e);if(r!==e)return console.log("Converted legacy single data URL: ".concat(e," -> ").concat(r)),r}return t.startsWith("/")?"".concat(i).concat(t):t}}return"/placeholder-property.jpg"}catch(e){return console.error("Error getting media URL:",e),"/placeholder-property.jpg"}}(m,"medium"):"/placeholder-property.jpg";return console.log("Image URL:",f),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-[1.02]",children:[(0,a.jsxs)("div",{className:"relative h-64 w-full",children:[f?(0,a.jsx)("img",{src:f,alt:r,className:"h-full w-full object-cover"}):(0,a.jsx)("div",{className:"h-full w-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No image"})}),(0,a.jsx)("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full ".concat({for_sale:"bg-green-100 text-green-800",for_rent:"bg-blue-100 text-blue-800",sold:"bg-red-100 text-red-800",rented:"bg-purple-100 text-purple-800"}[d]||"bg-gray-100"),children:{for_sale:"For Sale",for_rent:"For Rent",sold:"Sold",rented:"Rented"}[d]||d||"Status N/A"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2 line-clamp-1",children:r}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:o}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("p",{className:"text-xl font-bold text-primary",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"IDR";if(!e&&0!==e)return"Price on request";try{let r=Number(e);return new Intl.NumberFormat("id-ID",{style:"currency",currency:t,maximumFractionDigits:0}).format(r)}catch(t){return console.error("Error formatting price:",t),String(e)}}(n)})}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDECFÔ∏è"}),(0,a.jsx)("span",{children:p(s,"Bed")})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDEBF"}),(0,a.jsx)("span",{children:p(l,"Bath")})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCF"}),(0,a.jsx)("span",{children:p(c,"m\xb2")})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(h.default,{href:"/property/".concat(u||t.id),className:"block w-full bg-primary text-white text-center py-2 rounded hover:bg-primary-dark transition",children:"View Details"})})]})]})}}},function(e){e.O(0,[726,123,971,117,744],function(){return e(e.s=3250)}),_N_E=e.O()}]);